const t={allowFullscreen:!0,allowPreventContextMenu:!0,allowTouchPreventDefault:!0,allowKeyboardPreventDefault:!0,allowWarnOnReload:!0};function e(t,e){return t.x>e.x&&t.x<e.right&&t.y>e.y&&t.y<e.bottom}class n{constructor(t,e){this.x=t,this.y=e}}var s,i;(i=s||(s={})).Up="Up",i.Lt="Lt",i.Dn="Dn",i.Rt="Rt",i.Center="Center",i.LtUp="LtUp",i.LtDn="LtDn",i.RtUp="RtUp",i.RtDn="RtDn";class l{constructor(t){this.dPadButtons=[{name:s.LtUp,element:null},{name:s.Up,element:null},{name:s.RtUp,element:null},{name:s.Lt,element:null},{name:s.Center,element:null},{name:s.Rt,element:null},{name:s.LtDn,element:null},{name:s.Dn,element:null},{name:s.RtDn,element:null}],this.isLtUpPressed=!1,this.isUpPressed=!1,this.isRtUpPressed=!1,this.isLtPressed=!1,this.isRtPressed=!1,this.isLtDnPressed=!1,this.isDnPressed=!1,this.isRtDnPressed=!1,this.config=t.config,this.dPadElement=document.querySelector("#dPad"),this.dPadButtons.forEach((t=>{t.element=document.querySelector(`#${t.name}`)})),this.actionBtnsElement=document.querySelector("#actionBtns"),this.actionBtnIElement=document.querySelector("#actionBtnI"),this.actionBtnIIElement=document.querySelector("#actionBtnII"),this.powerBtnElement=document.querySelector("#powerBtn"),this.settingsBtnElement=document.querySelector("#settingsBtn")}setActiveDPadElements(t){t.name===s.LtUp?(this.dPadButtons.find((t=>t.name===s.Lt))?.element?.classList.add("active"),this.dPadButtons.find((t=>t.name===s.Up))?.element?.classList.add("active")):t.name===s.RtUp?(this.dPadButtons.find((t=>t.name===s.Rt))?.element?.classList.add("active"),this.dPadButtons.find((t=>t.name===s.Up))?.element?.classList.add("active")):t.name===s.LtDn?(this.dPadButtons.find((t=>t.name===s.Lt))?.element?.classList.add("active"),this.dPadButtons.find((t=>t.name===s.Dn))?.element?.classList.add("active")):t.name===s.RtDn?(this.dPadButtons.find((t=>t.name===s.Rt))?.element?.classList.add("active"),this.dPadButtons.find((t=>t.name===s.Dn))?.element?.classList.add("active")):t.element?.classList.add("active")}powerOn(){this.powerBtnElement.classList.remove("off"),this.powerBtnElement.classList.add("on"),this.dPadElement.addEventListener("touchstart",(t=>{this.setActiveDPadElements(this.dPadButtons.find((e=>e.name===t.target.id)))}),!1),this.dPadElement.addEventListener("touchmove",(t=>{this.config.dev.allowTouchPreventDefault&&t.preventDefault(),this.dPadButtons.forEach((t=>{t.element?.classList.remove("active")}));const s=t.touches[0];this.dPadButtons.forEach((t=>{e(new n(s.pageX,s.pageY),t.element.getBoundingClientRect())&&this.setActiveDPadElements(t)}))}),!1),this.dPadElement.addEventListener("touchend",(t=>{this.dPadButtons.forEach((t=>{t.element?.classList.remove("active")}))}),!1),this.actionBtnsElement.addEventListener("touchstart",(t=>{t.target.classList.add("active")}),!1),this.actionBtnsElement.addEventListener("touchmove",(t=>{this.config.dev.allowTouchPreventDefault&&t.preventDefault();const s=t.touches[0];this.actionBtnIElement.classList.remove("active"),this.actionBtnIIElement.classList.remove("active"),e(new n(s.pageX,s.pageY),this.actionBtnIElement.getBoundingClientRect())?this.actionBtnIElement.classList.add("active"):e(new n(s.pageX,s.pageY),this.actionBtnIIElement.getBoundingClientRect())&&this.actionBtnIIElement.classList.add("active")}),!1),this.actionBtnsElement.addEventListener("touchend",(t=>{t.target.classList.remove("active")}),!1)}}class o{constructor(){this.dimensions=256,this.pixelScale=1,this.antiAliasingScaleThreshold=4,this.element=document.querySelector("#screen"),this.context=this.element.getContext("2d"),this.context.imageSmoothingEnabled=!1,this.context.imageSmoothingQuality="low"}setPixelScale(t){const e=t/this.dimensions;this.pixelScale=e>this.antiAliasingScaleThreshold?Math.floor(e):e}}const a=new class{constructor(e={}){this.dev={...t,...e.dev}}}({dev:{allowFullscreen:!0,allowPreventContextMenu:!0,allowKeyboardPreventDefault:!1,allowTouchPreventDefault:!0,allowWarnOnReload:!1}});new class{constructor(t){this.calculatedScreenDimensions=256,this.isPoweredOn=!1,this.config=t.config,this.buttons=new l({config:this.config}),this.screen=new o,this.leftConElement=document.querySelector("#leftCon"),this.rightConElement=document.querySelector("#rightCon");const e=t=>{this.isPoweredOn||(this.config.dev.allowFullscreen&&document.documentElement.requestFullscreen(),this.config.dev.allowPreventContextMenu&&document.addEventListener("contextmenu",(t=>t.preventDefault())),this.config.dev.allowWarnOnReload&&(window.onbeforeunload=()=>!0),this.powerOn())};document.addEventListener("keydown",e,!1),document.addEventListener("touch",e,!1),document.addEventListener("click",e,!1),this.calculatePositionAndScale(),window.addEventListener("resize",(()=>{this.calculatePositionAndScale()}),!1),window.addEventListener("deviceorientation",(()=>{this.calculatePositionAndScale()}),!1)}calculatePositionAndScale(){const t=window.innerWidth,e=window.innerHeight,n=t>e;this.calculatedScreenDimensions=Math.floor(n?t/e<2?t/2:e:e/t<2?e/2:t),this.screen.setPixelScale(this.calculatedScreenDimensions),this.calculatedScreenDimensions/this.screen.dimensions>this.screen.pixelScale&&(this.calculatedScreenDimensions=this.screen.dimensions*this.screen.pixelScale),this.screen.element.width=this.calculatedScreenDimensions,this.screen.element.height=this.calculatedScreenDimensions,this.positionAndScaleElements(t,e,n)}positionAndScaleElements(t,e,n){const s=t/2-this.calculatedScreenDimensions/2,i=e/2-(n?this.calculatedScreenDimensions/2:this.calculatedScreenDimensions),l=n?s-this.calculatedScreenDimensions/2:s,o=n?i:i+this.calculatedScreenDimensions,a=n?s+this.calculatedScreenDimensions:s+this.calculatedScreenDimensions/2,c=n?i:i+this.calculatedScreenDimensions,d=this.calculatedScreenDimensions/2,h=this.calculatedScreenDimensions,m=d/1.5,r=m/3,u=d/2-m/2,p=h/2-m/2,E=d/1.5,v=E/1.2,w=d/3.5,B=d/2,g=h/2,f=d/6;this.screen.element.style.left=`${s}px`,this.screen.element.style.top=`${i}px`,this.leftConElement.style.left=`${l}px`,this.leftConElement.style.top=`${o}px`,this.leftConElement.style.width=`${d}px`,this.leftConElement.style.height=`${h}px`,this.rightConElement.style.left=`${a}px`,this.rightConElement.style.top=`${c}px`,this.rightConElement.style.width=`${d}px`,this.rightConElement.style.height=`${h}px`,this.buttons.dPadElement.style.left=`${u}px`,this.buttons.dPadElement.style.top=`${p}px`,this.buttons.dPadElement.style.width=`${m}px`,this.buttons.dPadElement.style.height=`${m}px`,(()=>{let t=0,e=0;this.buttons.dPadButtons.forEach((n=>{n.element.style.left=t*r+"px",n.element.style.top=e*r+"px",n.element.style.width=`${r}px`,n.element.style.height=`${r}px`,e=2===t?e+1:e,t=2!==t?t+1:0}))})(),this.buttons.actionBtnsElement.style.left=B-E/2+"px",this.buttons.actionBtnsElement.style.top=g-v/2+"px",this.buttons.actionBtnsElement.style.width=`${E}px`,this.buttons.actionBtnsElement.style.height=`${v}px`,this.buttons.actionBtnIElement.style.left="0",this.buttons.actionBtnIElement.style.top=v-w+"px",this.buttons.actionBtnIElement.style.width=`${w}px`,this.buttons.actionBtnIElement.style.height=`${w}px`,this.buttons.actionBtnIIElement.style.left=E-w+"px",this.buttons.actionBtnIIElement.style.top="0",this.buttons.actionBtnIIElement.style.width=`${w}px`,this.buttons.actionBtnIIElement.style.height=`${w}px`,this.buttons.powerBtnElement.style.left=`${f}px`,this.buttons.powerBtnElement.style.top=`${f}px`,this.buttons.powerBtnElement.style.width=`${f}px`,this.buttons.powerBtnElement.style.height=`${f}px`,this.buttons.settingsBtnElement.style.left=d-2*f+"px",this.buttons.settingsBtnElement.style.top=`${f}px`,this.buttons.settingsBtnElement.style.width=`${f}px`,this.buttons.settingsBtnElement.style.height=`${f}px`}powerOn(){this.isPoweredOn=!0,this.buttons.powerOn()}}({config:a});
//# sourceMappingURL=index.587804c4.js.map
